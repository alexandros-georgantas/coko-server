variables:
  IMAGE_NAME_CI: coko-server-ci
  # SERVICE_NAME_DEPLOYMENT: waxdemo

include:
  - project: 'cokoapps/ci'
    ref: main
    file: 'ci-templates.yml'

stages:
  - Build
  - Test

build ci image:
  extends: .build development
  stage: Build
  variables:
    IMAGE_NAME: $IMAGE_NAME_CI
    BUILD_PATH: .

lint:
  extends: .lint
  stage: Test
  variables:
    IMAGE_NAME: $IMAGE_NAME_CI
    WORKDIR: .
# test:
#   image: cokoapps/$IMAGE_NAME_CI:$CI_COMMIT_SHA
#   script:
#     - yarn jest

# only:
#   - master
# .deploy demo:
#   extends: .deploy
#   stage: Deploy demo
#   variables:
#     PRIVATE_KEY: $SSH_PRIVATE_KEY
#     PORT: $SSH_PORT
#     URL: $SSH_URL
#     USER: $SSH_USER
#     SERVICE_NAME: $SERVICE_NAME_DEPLOYMENT
# only:
#   - master
